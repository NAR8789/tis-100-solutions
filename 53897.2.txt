@0


@1
# FEED MAX DOWN
MOV UP RIGHT
MOV UP ACC
MOV ACC RIGHT
ADD RIGHT
MOV ACC DOWN #MAX
MOV ACC RIGHT

@2
MOV LEFT ACC
SUB LEFT
JLZ L
G:MOV ACC LEFT#GAP
MOV ACC RIGHT #GAP
MOV LEFT RIGHT#MAX
MOV 8 RIGHT    #CD
MOV LEFT ACC
SUB LEFT
JGZ G
L: MOV 0 LEFT
NEG
MOV ACC RIGHT #GAP
MOV LEFT RIGHT#MAX
MOV 4 RIGHT    #CD

@3
0:MOV LEFT ACC#GAP
SAV
NEG
ADD LEFT     #MIN
MOV ACC DOWN  #MIN
SWP
JEZ E
N:MOV LEFT DOWN#CD
MOV ACC DOWN  #GAP
JMP 0
E:MOV -8 DOWN  #CD
MOV ACC DOWN  #GAP
MOV LEFT NIL   #CD

@4


@5
ADD UP
0: MOV -1 DOWN
MOV -2 RIGHT
SUB 1
JGZ 0
MOV 1 DOWN
MOV -5 RIGHT

@6
# SUPPLY Y
MOV 17 ACC
JMP 0
MOV ACC DOWN
SUB 1
0: JRO LEFT

@7
# COLORS LOOP CTRL
# MIN-LOOP
MOV UP ACC    #MIN
L1: MOV 1 DOWN
SUB 1
JGZ L1
# COLOR DECISION
MOV UP DOWN    #CD
SUB UP
NEG           #GAP
JEZ L2E
L2: MOV 1 DOWN
SUB 1
JGZ L2
L2E:MOV -8 DOWN

@8
# SUPPLY X
JMP 0
MOV ACC RIGHT
0: JRO UP
ADD 2

@9
MOV LEFT DOWN  #X
MOV UP DOWN    #Y
MOV RIGHT DOWN
MOV RIGHT DOWN
MOV -1 DOWN

@10
# SUPPLY COLORS
L1: JRO UP
MOV 3 LEFT
MOV 3 LEFT
JMP L1
L2: JRO UP
MOV 0 LEFT
MOV 3 LEFT
JMP L2
L3: JRO UP
MOV 3 LEFT
MOV 0 LEFT
JMP L3
