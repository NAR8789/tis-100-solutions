@0
MOV UP ACC
MOV ACC DOWN
MOV ACC RIGHT

@1
# AWAIT XFER DONE
MOV DOWN NIL
# PUSHING
MOV LEFT RIGHT
MOV LEFT RIGHT
MOV LEFT RIGHT
MOV LEFT RIGHT
MOV LEFT RIGHT
# NOTIFY PUSH DONE
MOV 0 DOWN

@2


@3
MOV UP ACC
MOV ACC DOWN
MOV ACC DOWN

@4
# NOTIFY XFER DONE
MOV RIGHT UP
# POPPING
MOV 0 DOWN
MOV 0 DOWN
MOV 0 DOWN
MOV 0 DOWN
MOV 0 DOWN
# AWAIT PUSH DONE
MOV UP RIGHT

@5
MOV 0 DOWN
MOV 0 DOWN
MOV 0 DOWN
MOV 0 DOWN
MOV 0 DOWN
MOV 0 LEFT
T: MOV LEFT NIL
MOV UP DOWN
MOV UP DOWN
MOV UP DOWN
MOV UP DOWN
MOV UP DOWN
MOV 0 LEFT
JMP T

@6
MOV RIGHT ACC
MOV ACC RIGHT
MOV ACC RIGHT

@7
L: MOV UP RIGHT
ADD UP
MOV RIGHT LEFT
MOV LEFT RIGHT
SUB LEFT
MOV ACC DOWN
JMP L

@8
ADD LEFT
MOV UP NIL
SUB RIGHT
MOV ACC DOWN
ADD LEFT
MOV UP NIL
SUB RIGHT
MOV ACC DOWN
L: ADD LEFT
MOV UP NIL
MOV RIGHT LEFT
SUB LEFT
MOV ACC DOWN
JMP L